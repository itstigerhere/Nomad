"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/map/page",{

/***/ "(app-pages-browser)/./src/components/MapView.tsx":
/*!************************************!*\
  !*** ./src/components/MapView.tsx ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ MapView; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mapbox-gl */ \"(app-pages-browser)/./node_modules/mapbox-gl/dist/mapbox-gl.js\");\n/* harmony import */ var mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mapbox_gl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\nfunction MapView(param) {\n    let { places = [], center, routeGeoJson, userLocation } = param;\n    _s();\n    const mapRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const mapInstance = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const markerRefs = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)([]);\n    const mapToken = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(()=>{\n        var _process_env_NEXT_PUBLIC_MAPBOX_TOKEN;\n        return (_process_env_NEXT_PUBLIC_MAPBOX_TOKEN = \"pk.eyJ1IjoiYXNod2ExNjIzIiwiYSI6ImNta2doZDZ3eDA4YmszZ3F5b2ljMTZvd2sifQ.ULMJ1GRY0mR7Y0m-VLyiPw\") !== null && _process_env_NEXT_PUBLIC_MAPBOX_TOKEN !== void 0 ? _process_env_NEXT_PUBLIC_MAPBOX_TOKEN : \"\";\n    }, []);\n    const [routeError, setRouteError] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (!mapRef.current || !mapToken || mapInstance.current) return;\n        (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().accessToken) = mapToken;\n        const map = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Map)({\n            container: mapRef.current,\n            style: \"mapbox://styles/mapbox/streets-v12\",\n            center: center !== null && center !== void 0 ? center : [\n                77.5946,\n                12.9716\n            ],\n            zoom: 10\n        });\n        mapInstance.current = map;\n        return ()=>{\n            markerRefs.current.forEach((marker)=>marker.remove());\n            markerRefs.current = [];\n            map.remove();\n            mapInstance.current = null;\n        };\n    }, [\n        mapToken,\n        center\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (!mapInstance.current) return;\n        markerRefs.current.forEach((marker)=>marker.remove());\n        markerRefs.current = [];\n        setRouteError(null);\n        const bounds = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().LngLatBounds)();\n        // Render user location marker if provided\n        if (typeof (userLocation === null || userLocation === void 0 ? void 0 : userLocation.latitude) === \"number\" && typeof (userLocation === null || userLocation === void 0 ? void 0 : userLocation.longitude) === \"number\") {\n            const userMarker = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Marker)({\n                color: \"#ef4444\"\n            }) // green\n            .setLngLat([\n                userLocation.longitude,\n                userLocation.latitude\n            ]).setPopup(new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Popup)().setHTML(\"<strong>Your Start Location</strong>\")).addTo(mapInstance.current);\n            markerRefs.current.push(userMarker);\n            bounds.extend([\n                userLocation.longitude,\n                userLocation.latitude\n            ]);\n        }\n        if (!places.length) {\n            if (bounds.isEmpty()) return;\n            mapInstance.current.fitBounds(bounds, {\n                padding: 60,\n                maxZoom: 13\n            });\n            return;\n        }\n        places.forEach((place)=>{\n            const marker = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Marker)({\n                color: \"#4f6cff\"\n            }).setLngLat([\n                place.longitude,\n                place.latitude\n            ]).setPopup(new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Popup)().setHTML(\"<strong>\".concat(place.name, \"</strong>\"))).addTo(mapInstance.current);\n            markerRefs.current.push(marker);\n            bounds.extend([\n                place.longitude,\n                place.latitude\n            ]);\n        });\n        mapInstance.current.fitBounds(bounds, {\n            padding: 60,\n            maxZoom: 13\n        });\n    }, [\n        places,\n        userLocation\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        const map = mapInstance.current;\n        if (!map || !mapToken) return;\n        if (routeGeoJson) {\n            try {\n                const geometry = JSON.parse(routeGeoJson);\n                if (map.getLayer(\"route-line\")) {\n                    map.removeLayer(\"route-line\");\n                }\n                if (map.getSource(\"route\")) {\n                    map.removeSource(\"route\");\n                }\n                map.addSource(\"route\", {\n                    type: \"geojson\",\n                    data: {\n                        type: \"Feature\",\n                        geometry\n                    }\n                });\n                map.addLayer({\n                    id: \"route-line\",\n                    type: \"line\",\n                    source: \"route\",\n                    layout: {\n                        \"line-join\": \"round\",\n                        \"line-cap\": \"round\"\n                    },\n                    paint: {\n                        \"line-color\": \"#4f6cff\",\n                        \"line-width\": 4\n                    }\n                });\n                return;\n            } catch (err) {\n                setRouteError(\"Invalid route data\");\n            }\n        }\n        if (places.length < 2) {\n            if (map.getLayer(\"route-line\")) {\n                map.removeLayer(\"route-line\");\n            }\n            if (map.getSource(\"route\")) {\n                map.removeSource(\"route\");\n            }\n            return;\n        }\n        let routePoints = places;\n        if (userLocation && typeof userLocation.latitude === \"number\" && typeof userLocation.longitude === \"number\") {\n            var _places_;\n            routePoints = [\n                {\n                    id: -1,\n                    name: \"Start\",\n                    city: ((_places_ = places[0]) === null || _places_ === void 0 ? void 0 : _places_.city) || \"\",\n                    latitude: userLocation.latitude,\n                    longitude: userLocation.longitude,\n                    category: \"\",\n                    rating: 0,\n                    distanceKm: 0\n                },\n                ...places\n            ];\n        }\n        const coords = routePoints.map((p)=>\"\".concat(p.longitude, \",\").concat(p.latitude)).join(\";\");\n        // Try Mapbox Optimization API first\n        const optimizationUrl = \"https://api.mapbox.com/optimized-trips/v1/mapbox/driving/\".concat(coords, \"?geometries=geojson&source=first&destination=last&roundtrip=false&access_token=\").concat(mapToken);\n        // Helper to add distance markers\n        function addDistanceMarkers(legs, coordinates) {\n            // Remove previous distance markers\n            if (markerRefs.current && markerRefs.current.length) {\n                markerRefs.current = markerRefs.current.filter((m)=>!m._isDistanceMarker);\n            }\n            if (!legs || !coordinates) return;\n            for(let i = 0; i < legs.length; i++){\n                const leg = legs[i];\n                // Find midpoint between start and end of this leg\n                const start = coordinates[i];\n                const end = coordinates[i + 1];\n                if (!start || !end) continue;\n                const midLng = (start[0] + end[0]) / 2;\n                const midLat = (start[1] + end[1]) / 2;\n                const distanceKm = (leg.distance / 1000).toFixed(2);\n                const el = document.createElement(\"div\");\n                el.style.background = \"#fff\";\n                el.style.border = \"1px solid #4f6cff\";\n                el.style.borderRadius = \"8px\";\n                el.style.padding = \"2px 8px\";\n                el.style.fontSize = \"12px\";\n                el.style.fontWeight = \"bold\";\n                el.style.color = \"#222\";\n                el.style.boxShadow = \"0 1px 4px rgba(0,0,0,0.08)\";\n                el.innerText = \"\".concat(distanceKm, \" km\");\n                const marker = new (mapbox_gl__WEBPACK_IMPORTED_MODULE_1___default().Marker)({\n                    element: el,\n                    anchor: \"bottom\"\n                }).setLngLat([\n                    midLng,\n                    midLat\n                ]).addTo(map);\n                marker._isDistanceMarker = true;\n                markerRefs.current.push(marker);\n            }\n        }\n        fetch(optimizationUrl).then((res)=>res.json()).then((data)=>{\n            if (data.trips && data.trips.length > 0) {\n                const route = data.trips[0].geometry;\n                if (map.getLayer(\"route-line\")) {\n                    map.removeLayer(\"route-line\");\n                }\n                if (map.getSource(\"route\")) {\n                    map.removeSource(\"route\");\n                }\n                map.addSource(\"route\", {\n                    type: \"geojson\",\n                    data: {\n                        type: \"Feature\",\n                        geometry: route\n                    }\n                });\n                map.addLayer({\n                    id: \"route-line\",\n                    type: \"line\",\n                    source: \"route\",\n                    layout: {\n                        \"line-join\": \"round\",\n                        \"line-cap\": \"round\"\n                    },\n                    paint: {\n                        \"line-color\": \"#4f6cff\",\n                        \"line-width\": 4\n                    }\n                });\n                // Add distance markers for each leg\n                if (data.trips[0].legs && data.trips[0].geometry && data.trips[0].geometry.coordinates) {\n                    addDistanceMarkers(data.trips[0].legs, data.trips[0].geometry.coordinates);\n                }\n            } else {\n                // Fallback to Directions API if optimization fails\n                const url = \"https://api.mapbox.com/directions/v5/mapbox/driving/\".concat(coords, \"?geometries=geojson&access_token=\").concat(mapToken);\n                fetch(url).then((res)=>res.json()).then((data)=>{\n                    var _data_routes;\n                    if (!((_data_routes = data.routes) === null || _data_routes === void 0 ? void 0 : _data_routes.length)) {\n                        setRouteError(\"No route found for selected places\");\n                        return;\n                    }\n                    const route = data.routes[0].geometry;\n                    if (map.getLayer(\"route-line\")) {\n                        map.removeLayer(\"route-line\");\n                    }\n                    if (map.getSource(\"route\")) {\n                        map.removeSource(\"route\");\n                    }\n                    map.addSource(\"route\", {\n                        type: \"geojson\",\n                        data: {\n                            type: \"Feature\",\n                            geometry: route\n                        }\n                    });\n                    map.addLayer({\n                        id: \"route-line\",\n                        type: \"line\",\n                        source: \"route\",\n                        layout: {\n                            \"line-join\": \"round\",\n                            \"line-cap\": \"round\"\n                        },\n                        paint: {\n                            \"line-color\": \"#4f6cff\",\n                            \"line-width\": 4\n                        }\n                    });\n                    // Add distance markers for each leg\n                    if (data.routes[0].legs && data.routes[0].geometry && data.routes[0].geometry.coordinates) {\n                        addDistanceMarkers(data.routes[0].legs, data.routes[0].geometry.coordinates);\n                    }\n                }).catch(()=>setRouteError(\"Failed to load route\"));\n            }\n        }).catch(()=>setRouteError(\"Failed to load route\"));\n    }, [\n        places,\n        mapToken,\n        routeGeoJson\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"space-y-3\",\n        children: [\n            !mapToken && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"text-sm text-slate-500\",\n                children: \"Set NEXT_PUBLIC_MAPBOX_TOKEN in frontend/.env.local to enable the map.\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\shubh\\\\Desktop\\\\Nomad\\\\nomad\\\\frontend\\\\src\\\\components\\\\MapView.tsx\",\n                lineNumber: 267,\n                columnNumber: 9\n            }, this),\n            routeError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"text-sm text-red-600\",\n                children: routeError\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\shubh\\\\Desktop\\\\Nomad\\\\nomad\\\\frontend\\\\src\\\\components\\\\MapView.tsx\",\n                lineNumber: 272,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"h-[420px] rounded-xl overflow-hidden\",\n                ref: mapRef\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\shubh\\\\Desktop\\\\Nomad\\\\nomad\\\\frontend\\\\src\\\\components\\\\MapView.tsx\",\n                lineNumber: 274,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\shubh\\\\Desktop\\\\Nomad\\\\nomad\\\\frontend\\\\src\\\\components\\\\MapView.tsx\",\n        lineNumber: 265,\n        columnNumber: 5\n    }, this);\n}\n_s(MapView, \"UB5C9Pf9RlIeAMFRmHxdREhWnw8=\");\n_c = MapView;\nvar _c;\n$RefreshReg$(_c, \"MapView\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL01hcFZpZXcudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBRWlDO0FBQzRCO0FBVzlDLFNBQVNLLFFBQVEsS0FBaUU7UUFBakUsRUFBRUMsU0FBUyxFQUFFLEVBQUVDLE1BQU0sRUFBRUMsWUFBWSxFQUFFQyxZQUFZLEVBQWdCLEdBQWpFOztJQUM5QixNQUFNQyxTQUFTUCw2Q0FBTUEsQ0FBd0I7SUFDN0MsTUFBTVEsY0FBY1IsNkNBQU1BLENBQU07SUFDaEMsTUFBTVMsYUFBYVQsNkNBQU1BLENBQVEsRUFBRTtJQUNuQyxNQUFNVSxXQUFXWCw4Q0FBT0EsQ0FBQztZQUFNWTtlQUFBQSxDQUFBQSx3Q0FBQUEsOEZBQW9DLGNBQXBDQSxtREFBQUEsd0NBQXdDO0lBQUMsR0FBRyxFQUFFO0lBQzdFLE1BQU0sQ0FBQ0csWUFBWUMsY0FBYyxHQUFHZCwrQ0FBUUEsQ0FBZ0I7SUFFNURILGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDUyxPQUFPUyxPQUFPLElBQUksQ0FBQ04sWUFBWUYsWUFBWVEsT0FBTyxFQUFFO1FBRXpEbkIsOERBQW9CLEdBQUdhO1FBRXZCLE1BQU1RLE1BQU0sSUFBSXJCLHNEQUFZLENBQUM7WUFDM0J1QixXQUFXYixPQUFPUyxPQUFPO1lBQ3pCSyxPQUFPO1lBQ1BqQixRQUFRQSxtQkFBQUEsb0JBQUFBLFNBQVU7Z0JBQUM7Z0JBQVM7YUFBUTtZQUNwQ2tCLE1BQU07UUFDUjtRQUVBZCxZQUFZUSxPQUFPLEdBQUdFO1FBRXRCLE9BQU87WUFDTFQsV0FBV08sT0FBTyxDQUFDTyxPQUFPLENBQUMsQ0FBQ0MsU0FBV0EsT0FBT0MsTUFBTTtZQUNwRGhCLFdBQVdPLE9BQU8sR0FBRyxFQUFFO1lBQ3ZCRSxJQUFJTyxNQUFNO1lBQ1ZqQixZQUFZUSxPQUFPLEdBQUc7UUFDeEI7SUFDRixHQUFHO1FBQUNOO1FBQVVOO0tBQU87SUFFckJOLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxD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QUNoQyxJQUFJLEVBQUVqQixLQUFLaUQsTUFBTSxDQUFDLEVBQUUsQ0FBQzFELFFBQVEsQ0FBQzJCLFdBQVc7b0JBQzdFO2dCQUNGLEdBQ0NnQyxLQUFLLENBQUMsSUFBTTNGLGNBQWM7WUFDL0I7UUFDRixHQUNDMkYsS0FBSyxDQUFDLElBQU0zRixjQUFjO0lBQy9CLEdBQUc7UUFBQ1o7UUFBUU87UUFBVUw7S0FBYTtJQUVuQyxxQkFDRSw4REFBQ3NHO1FBQUlDLFdBQVU7O1lBQ1osQ0FBQ2xHLDBCQUNBLDhEQUFDMkQ7Z0JBQUV1QyxXQUFVOzBCQUF5Qjs7Ozs7O1lBSXZDOUYsNEJBQ0MsOERBQUN1RDtnQkFBRXVDLFdBQVU7MEJBQXdCOUY7Ozs7OzswQkFFdkMsOERBQUM2RjtnQkFBSUMsV0FBVTtnQkFBdUNDLEtBQUt0Rzs7Ozs7Ozs7Ozs7O0FBR2pFO0dBdFF3Qkw7S0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2NvbXBvbmVudHMvTWFwVmlldy50c3g/MDNlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IG1hcGJveGdsIGZyb20gXCJtYXBib3gtZ2xcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgdHlwZSB7IFBsYWNlTmVhcmJ5IH0gZnJvbSBcIkAvbGliL3BsYWNlQXBpXCI7XG5cbnR5cGUgTWFwVmlld1Byb3BzID0ge1xuICBwbGFjZXM/OiBQbGFjZU5lYXJieVtdO1xuICBjZW50ZXI/OiBbbnVtYmVyLCBudW1iZXJdO1xuICByb3V0ZUdlb0pzb24/OiBzdHJpbmcgfCBudWxsO1xuICB1c2VyTG9jYXRpb24/OiB7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNYXBWaWV3KHsgcGxhY2VzID0gW10sIGNlbnRlciwgcm91dGVHZW9Kc29uLCB1c2VyTG9jYXRpb24gfTogTWFwVmlld1Byb3BzKSB7XG4gIGNvbnN0IG1hcFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBtYXBJbnN0YW5jZSA9IHVzZVJlZjxhbnk+KG51bGwpO1xuICBjb25zdCBtYXJrZXJSZWZzID0gdXNlUmVmPGFueVtdPihbXSk7XG4gIGNvbnN0IG1hcFRva2VuID0gdXNlTWVtbygoKSA9PiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19NQVBCT1hfVE9LRU4gPz8gXCJcIiwgW10pO1xuICBjb25zdCBbcm91dGVFcnJvciwgc2V0Um91dGVFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbWFwUmVmLmN1cnJlbnQgfHwgIW1hcFRva2VuIHx8IG1hcEluc3RhbmNlLmN1cnJlbnQpIHJldHVybjtcblxuICAgIG1hcGJveGdsLmFjY2Vzc1Rva2VuID0gbWFwVG9rZW47XG5cbiAgICBjb25zdCBtYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHtcbiAgICAgIGNvbnRhaW5lcjogbWFwUmVmLmN1cnJlbnQsXG4gICAgICBzdHlsZTogXCJtYXBib3g6Ly9zdHlsZXMvbWFwYm94L3N0cmVldHMtdjEyXCIsXG4gICAgICBjZW50ZXI6IGNlbnRlciA/PyBbNzcuNTk0NiwgMTIuOTcxNl0sXG4gICAgICB6b29tOiAxMCxcbiAgICB9KTtcblxuICAgIG1hcEluc3RhbmNlLmN1cnJlbnQgPSBtYXA7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgbWFya2VyUmVmcy5jdXJyZW50LmZvckVhY2goKG1hcmtlcikgPT4gbWFya2VyLnJlbW92ZSgpKTtcbiAgICAgIG1hcmtlclJlZnMuY3VycmVudCA9IFtdO1xuICAgICAgbWFwLnJlbW92ZSgpO1xuICAgICAgbWFwSW5zdGFuY2UuY3VycmVudCA9IG51bGw7XG4gICAgfTtcbiAgfSwgW21hcFRva2VuLCBjZW50ZXJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbWFwSW5zdGFuY2UuY3VycmVudCkgcmV0dXJuO1xuICAgIG1hcmtlclJlZnMuY3VycmVudC5mb3JFYWNoKChtYXJrZXIpID0+IG1hcmtlci5yZW1vdmUoKSk7XG4gICAgbWFya2VyUmVmcy5jdXJyZW50ID0gW107XG4gICAgc2V0Um91dGVFcnJvcihudWxsKTtcblxuICAgIGNvbnN0IGJvdW5kcyA9IG5ldyBtYXBib3hnbC5MbmdMYXRCb3VuZHMoKTtcblxuICAgIC8vIFJlbmRlciB1c2VyIGxvY2F0aW9uIG1hcmtlciBpZiBwcm92aWRlZFxuICAgIGlmICh0eXBlb2YgdXNlckxvY2F0aW9uPy5sYXRpdHVkZSA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgdXNlckxvY2F0aW9uPy5sb25naXR1ZGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IHVzZXJNYXJrZXIgPSBuZXcgbWFwYm94Z2wuTWFya2VyKHsgY29sb3I6IFwiI2VmNDQ0NFwiIH0pIC8vIGdyZWVuXG4gICAgICAgIC5zZXRMbmdMYXQoW3VzZXJMb2NhdGlvbi5sb25naXR1ZGUsIHVzZXJMb2NhdGlvbi5sYXRpdHVkZV0pXG4gICAgICAgIC5zZXRQb3B1cChuZXcgbWFwYm94Z2wuUG9wdXAoKS5zZXRIVE1MKGA8c3Ryb25nPllvdXIgU3RhcnQgTG9jYXRpb248L3N0cm9uZz5gKSlcbiAgICAgICAgLmFkZFRvKG1hcEluc3RhbmNlLmN1cnJlbnQgYXMgYW55KTtcbiAgICAgIG1hcmtlclJlZnMuY3VycmVudC5wdXNoKHVzZXJNYXJrZXIpO1xuICAgICAgYm91bmRzLmV4dGVuZChbdXNlckxvY2F0aW9uLmxvbmdpdHVkZSwgdXNlckxvY2F0aW9uLmxhdGl0dWRlXSk7XG4gICAgfVxuXG4gICAgaWYgKCFwbGFjZXMubGVuZ3RoKSB7XG4gICAgICBpZiAoYm91bmRzLmlzRW1wdHkoKSkgcmV0dXJuO1xuICAgICAgbWFwSW5zdGFuY2UuY3VycmVudC5maXRCb3VuZHMoYm91bmRzLCB7IHBhZGRpbmc6IDYwLCBtYXhab29tOiAxMyB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwbGFjZXMuZm9yRWFjaCgocGxhY2UpID0+IHtcbiAgICAgIGNvbnN0IG1hcmtlciA9IG5ldyBtYXBib3hnbC5NYXJrZXIoeyBjb2xvcjogXCIjNGY2Y2ZmXCIgfSlcbiAgICAgICAgLnNldExuZ0xhdChbcGxhY2UubG9uZ2l0dWRlLCBwbGFjZS5sYXRpdHVkZV0pXG4gICAgICAgIC5zZXRQb3B1cChuZXcgbWFwYm94Z2wuUG9wdXAoKS5zZXRIVE1MKGA8c3Ryb25nPiR7cGxhY2UubmFtZX08L3N0cm9uZz5gKSlcbiAgICAgICAgLmFkZFRvKG1hcEluc3RhbmNlLmN1cnJlbnQgYXMgYW55KTtcbiAgICAgIG1hcmtlclJlZnMuY3VycmVudC5wdXNoKG1hcmtlcik7XG4gICAgICBib3VuZHMuZXh0ZW5kKFtwbGFjZS5sb25naXR1ZGUsIHBsYWNlLmxhdGl0dWRlXSk7XG4gICAgfSk7XG5cbiAgICBtYXBJbnN0YW5jZS5jdXJyZW50LmZpdEJvdW5kcyhib3VuZHMsIHsgcGFkZGluZzogNjAsIG1heFpvb206IDEzIH0pO1xuICB9LCBbcGxhY2VzLCB1c2VyTG9jYXRpb25dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IG1hcCA9IG1hcEluc3RhbmNlLmN1cnJlbnQ7XG4gICAgaWYgKCFtYXAgfHwgIW1hcFRva2VuKSByZXR1cm47XG4gICAgaWYgKHJvdXRlR2VvSnNvbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBKU09OLnBhcnNlKHJvdXRlR2VvSnNvbik7XG4gICAgICAgIGlmIChtYXAuZ2V0TGF5ZXIoXCJyb3V0ZS1saW5lXCIpKSB7XG4gICAgICAgICAgbWFwLnJlbW92ZUxheWVyKFwicm91dGUtbGluZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWFwLmdldFNvdXJjZShcInJvdXRlXCIpKSB7XG4gICAgICAgICAgbWFwLnJlbW92ZVNvdXJjZShcInJvdXRlXCIpO1xuICAgICAgICB9XG4gICAgICAgIG1hcC5hZGRTb3VyY2UoXCJyb3V0ZVwiLCB7XG4gICAgICAgICAgdHlwZTogXCJnZW9qc29uXCIsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogXCJGZWF0dXJlXCIsXG4gICAgICAgICAgICBnZW9tZXRyeSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgbWFwLmFkZExheWVyKHtcbiAgICAgICAgICBpZDogXCJyb3V0ZS1saW5lXCIsXG4gICAgICAgICAgdHlwZTogXCJsaW5lXCIsXG4gICAgICAgICAgc291cmNlOiBcInJvdXRlXCIsXG4gICAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgICBcImxpbmUtam9pblwiOiBcInJvdW5kXCIsXG4gICAgICAgICAgICBcImxpbmUtY2FwXCI6IFwicm91bmRcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBhaW50OiB7XG4gICAgICAgICAgICBcImxpbmUtY29sb3JcIjogXCIjNGY2Y2ZmXCIsXG4gICAgICAgICAgICBcImxpbmUtd2lkdGhcIjogNCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHNldFJvdXRlRXJyb3IoXCJJbnZhbGlkIHJvdXRlIGRhdGFcIik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwbGFjZXMubGVuZ3RoIDwgMikge1xuICAgICAgaWYgKG1hcC5nZXRMYXllcihcInJvdXRlLWxpbmVcIikpIHtcbiAgICAgICAgbWFwLnJlbW92ZUxheWVyKFwicm91dGUtbGluZVwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXAuZ2V0U291cmNlKFwicm91dGVcIikpIHtcbiAgICAgICAgbWFwLnJlbW92ZVNvdXJjZShcInJvdXRlXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCByb3V0ZVBvaW50cyA9IHBsYWNlcztcbiAgICBpZiAodXNlckxvY2F0aW9uICYmIHR5cGVvZiB1c2VyTG9jYXRpb24ubGF0aXR1ZGUgPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIHVzZXJMb2NhdGlvbi5sb25naXR1ZGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJvdXRlUG9pbnRzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6IC0xLFxuICAgICAgICAgIG5hbWU6IFwiU3RhcnRcIixcbiAgICAgICAgICBjaXR5OiBwbGFjZXNbMF0/LmNpdHkgfHwgXCJcIixcbiAgICAgICAgICBsYXRpdHVkZTogdXNlckxvY2F0aW9uLmxhdGl0dWRlLFxuICAgICAgICAgIGxvbmdpdHVkZTogdXNlckxvY2F0aW9uLmxvbmdpdHVkZSxcbiAgICAgICAgICBjYXRlZ29yeTogXCJcIixcbiAgICAgICAgICByYXRpbmc6IDAsXG4gICAgICAgICAgZGlzdGFuY2VLbTogMCxcbiAgICAgICAgfSxcbiAgICAgICAgLi4ucGxhY2VzXG4gICAgICBdO1xuICAgIH1cbiAgICBjb25zdCBjb29yZHMgPSByb3V0ZVBvaW50cy5tYXAoKHApID0+IGAke3AubG9uZ2l0dWRlfSwke3AubGF0aXR1ZGV9YCkuam9pbihcIjtcIik7XG5cbiAgICAvLyBUcnkgTWFwYm94IE9wdGltaXphdGlvbiBBUEkgZmlyc3RcbiAgICBjb25zdCBvcHRpbWl6YXRpb25VcmwgPSBgaHR0cHM6Ly9hcGkubWFwYm94LmNvbS9vcHRpbWl6ZWQtdHJpcHMvdjEvbWFwYm94L2RyaXZpbmcvJHtjb29yZHN9P2dlb21ldHJpZXM9Z2VvanNvbiZzb3VyY2U9Zmlyc3QmZGVzdGluYXRpb249bGFzdCZyb3VuZHRyaXA9ZmFsc2UmYWNjZXNzX3Rva2VuPSR7bWFwVG9rZW59YDtcbiAgICAvLyBIZWxwZXIgdG8gYWRkIGRpc3RhbmNlIG1hcmtlcnNcbiAgICBmdW5jdGlvbiBhZGREaXN0YW5jZU1hcmtlcnMobGVncywgY29vcmRpbmF0ZXMpIHtcbiAgICAgIC8vIFJlbW92ZSBwcmV2aW91cyBkaXN0YW5jZSBtYXJrZXJzXG4gICAgICBpZiAobWFya2VyUmVmcy5jdXJyZW50ICYmIG1hcmtlclJlZnMuY3VycmVudC5sZW5ndGgpIHtcbiAgICAgICAgbWFya2VyUmVmcy5jdXJyZW50ID0gbWFya2VyUmVmcy5jdXJyZW50LmZpbHRlcigobSkgPT4gIW0uX2lzRGlzdGFuY2VNYXJrZXIpO1xuICAgICAgfVxuICAgICAgaWYgKCFsZWdzIHx8ICFjb29yZGluYXRlcykgcmV0dXJuO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxlZyA9IGxlZ3NbaV07XG4gICAgICAgIC8vIEZpbmQgbWlkcG9pbnQgYmV0d2VlbiBzdGFydCBhbmQgZW5kIG9mIHRoaXMgbGVnXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGNvbnN0IGVuZCA9IGNvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgaWYgKCFzdGFydCB8fCAhZW5kKSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgbWlkTG5nID0gKHN0YXJ0WzBdICsgZW5kWzBdKSAvIDI7XG4gICAgICAgIGNvbnN0IG1pZExhdCA9IChzdGFydFsxXSArIGVuZFsxXSkgLyAyO1xuICAgICAgICBjb25zdCBkaXN0YW5jZUttID0gKGxlZy5kaXN0YW5jZSAvIDEwMDApLnRvRml4ZWQoMik7XG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9IFwiI2ZmZlwiO1xuICAgICAgICBlbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCAjNGY2Y2ZmXCI7XG4gICAgICAgIGVsLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiOHB4XCI7XG4gICAgICAgIGVsLnN0eWxlLnBhZGRpbmcgPSBcIjJweCA4cHhcIjtcbiAgICAgICAgZWwuc3R5bGUuZm9udFNpemUgPSBcIjEycHhcIjtcbiAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9IFwiYm9sZFwiO1xuICAgICAgICBlbC5zdHlsZS5jb2xvciA9IFwiIzIyMlwiO1xuICAgICAgICBlbC5zdHlsZS5ib3hTaGFkb3cgPSBcIjAgMXB4IDRweCByZ2JhKDAsMCwwLDAuMDgpXCI7XG4gICAgICAgIGVsLmlubmVyVGV4dCA9IGAke2Rpc3RhbmNlS219IGttYDtcbiAgICAgICAgY29uc3QgbWFya2VyID0gbmV3IG1hcGJveGdsLk1hcmtlcih7IGVsZW1lbnQ6IGVsLCBhbmNob3I6IFwiYm90dG9tXCIgfSlcbiAgICAgICAgICAuc2V0TG5nTGF0KFttaWRMbmcsIG1pZExhdF0pXG4gICAgICAgICAgLmFkZFRvKG1hcCk7XG4gICAgICAgIG1hcmtlci5faXNEaXN0YW5jZU1hcmtlciA9IHRydWU7XG4gICAgICAgIG1hcmtlclJlZnMuY3VycmVudC5wdXNoKG1hcmtlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZmV0Y2gob3B0aW1pemF0aW9uVXJsKVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGlmIChkYXRhLnRyaXBzICYmIGRhdGEudHJpcHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJvdXRlID0gZGF0YS50cmlwc1swXS5nZW9tZXRyeTtcbiAgICAgICAgICBpZiAobWFwLmdldExheWVyKFwicm91dGUtbGluZVwiKSkge1xuICAgICAgICAgICAgbWFwLnJlbW92ZUxheWVyKFwicm91dGUtbGluZVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1hcC5nZXRTb3VyY2UoXCJyb3V0ZVwiKSkge1xuICAgICAgICAgICAgbWFwLnJlbW92ZVNvdXJjZShcInJvdXRlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtYXAuYWRkU291cmNlKFwicm91dGVcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJnZW9qc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiRmVhdHVyZVwiLFxuICAgICAgICAgICAgICBnZW9tZXRyeTogcm91dGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG1hcC5hZGRMYXllcih7XG4gICAgICAgICAgICBpZDogXCJyb3V0ZS1saW5lXCIsXG4gICAgICAgICAgICB0eXBlOiBcImxpbmVcIixcbiAgICAgICAgICAgIHNvdXJjZTogXCJyb3V0ZVwiLFxuICAgICAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgICAgIFwibGluZS1qb2luXCI6IFwicm91bmRcIixcbiAgICAgICAgICAgICAgXCJsaW5lLWNhcFwiOiBcInJvdW5kXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGFpbnQ6IHtcbiAgICAgICAgICAgICAgXCJsaW5lLWNvbG9yXCI6IFwiIzRmNmNmZlwiLFxuICAgICAgICAgICAgICBcImxpbmUtd2lkdGhcIjogNCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gQWRkIGRpc3RhbmNlIG1hcmtlcnMgZm9yIGVhY2ggbGVnXG4gICAgICAgICAgaWYgKGRhdGEudHJpcHNbMF0ubGVncyAmJiBkYXRhLnRyaXBzWzBdLmdlb21ldHJ5ICYmIGRhdGEudHJpcHNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIGFkZERpc3RhbmNlTWFya2VycyhkYXRhLnRyaXBzWzBdLmxlZ3MsIGRhdGEudHJpcHNbMF0uZ2VvbWV0cnkuY29vcmRpbmF0ZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGYWxsYmFjayB0byBEaXJlY3Rpb25zIEFQSSBpZiBvcHRpbWl6YXRpb24gZmFpbHNcbiAgICAgICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkubWFwYm94LmNvbS9kaXJlY3Rpb25zL3Y1L21hcGJveC9kcml2aW5nLyR7Y29vcmRzfT9nZW9tZXRyaWVzPWdlb2pzb24mYWNjZXNzX3Rva2VuPSR7bWFwVG9rZW59YDtcbiAgICAgICAgICBmZXRjaCh1cmwpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFkYXRhLnJvdXRlcz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgc2V0Um91dGVFcnJvcihcIk5vIHJvdXRlIGZvdW5kIGZvciBzZWxlY3RlZCBwbGFjZXNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gZGF0YS5yb3V0ZXNbMF0uZ2VvbWV0cnk7XG4gICAgICAgICAgICAgIGlmIChtYXAuZ2V0TGF5ZXIoXCJyb3V0ZS1saW5lXCIpKSB7XG4gICAgICAgICAgICAgICAgbWFwLnJlbW92ZUxheWVyKFwicm91dGUtbGluZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAobWFwLmdldFNvdXJjZShcInJvdXRlXCIpKSB7XG4gICAgICAgICAgICAgICAgbWFwLnJlbW92ZVNvdXJjZShcInJvdXRlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG1hcC5hZGRTb3VyY2UoXCJyb3V0ZVwiLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJnZW9qc29uXCIsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgdHlwZTogXCJGZWF0dXJlXCIsXG4gICAgICAgICAgICAgICAgICBnZW9tZXRyeTogcm91dGUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIG1hcC5hZGRMYXllcih7XG4gICAgICAgICAgICAgICAgaWQ6IFwicm91dGUtbGluZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwibGluZVwiLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJyb3V0ZVwiLFxuICAgICAgICAgICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgICAgICAgXCJsaW5lLWpvaW5cIjogXCJyb3VuZFwiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lLWNhcFwiOiBcInJvdW5kXCIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwYWludDoge1xuICAgICAgICAgICAgICAgICAgXCJsaW5lLWNvbG9yXCI6IFwiIzRmNmNmZlwiLFxuICAgICAgICAgICAgICAgICAgXCJsaW5lLXdpZHRoXCI6IDQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIC8vIEFkZCBkaXN0YW5jZSBtYXJrZXJzIGZvciBlYWNoIGxlZ1xuICAgICAgICAgICAgICBpZiAoZGF0YS5yb3V0ZXNbMF0ubGVncyAmJiBkYXRhLnJvdXRlc1swXS5nZW9tZXRyeSAmJiBkYXRhLnJvdXRlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcykge1xuICAgICAgICAgICAgICAgIGFkZERpc3RhbmNlTWFya2VycyhkYXRhLnJvdXRlc1swXS5sZWdzLCBkYXRhLnJvdXRlc1swXS5nZW9tZXRyeS5jb29yZGluYXRlcyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4gc2V0Um91dGVFcnJvcihcIkZhaWxlZCB0byBsb2FkIHJvdXRlXCIpKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiBzZXRSb3V0ZUVycm9yKFwiRmFpbGVkIHRvIGxvYWQgcm91dGVcIikpO1xuICB9LCBbcGxhY2VzLCBtYXBUb2tlbiwgcm91dGVHZW9Kc29uXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgeyFtYXBUb2tlbiAmJiAoXG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1zbGF0ZS01MDBcIj5cbiAgICAgICAgICBTZXQgTkVYVF9QVUJMSUNfTUFQQk9YX1RPS0VOIGluIGZyb250ZW5kLy5lbnYubG9jYWwgdG8gZW5hYmxlIHRoZSBtYXAuXG4gICAgICAgIDwvcD5cbiAgICAgICl9XG4gICAgICB7cm91dGVFcnJvciAmJiAoXG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1yZWQtNjAwXCI+e3JvdXRlRXJyb3J9PC9wPlxuICAgICAgKX1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bNDIwcHhdIHJvdW5kZWQteGwgb3ZlcmZsb3ctaGlkZGVuXCIgcmVmPXttYXBSZWZ9IC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsibWFwYm94Z2wiLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwidXNlUmVmIiwidXNlU3RhdGUiLCJNYXBWaWV3IiwicGxhY2VzIiwiY2VudGVyIiwicm91dGVHZW9Kc29uIiwidXNlckxvY2F0aW9uIiwibWFwUmVmIiwibWFwSW5zdGFuY2UiLCJtYXJrZXJSZWZzIiwibWFwVG9rZW4iLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfTUFQQk9YX1RPS0VOIiwicm91dGVFcnJvciIsInNldFJvdXRlRXJyb3IiLCJjdXJyZW50IiwiYWNjZXNzVG9rZW4iLCJtYXAiLCJNYXAiLCJjb250YWluZXIiLCJzdHlsZSIsInpvb20iLCJmb3JFYWNoIiwibWFya2VyIiwicmVtb3ZlIiwiYm91bmRzIiwiTG5nTGF0Qm91bmRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJ1c2VyTWFya2VyIiwiTWFya2VyIiwiY29sb3IiLCJzZXRMbmdMYXQiLCJzZXRQb3B1cCIsIlBvcHVwIiwic2V0SFRNTCIsImFkZFRvIiwicHVzaCIsImV4dGVuZCIsImxlbmd0aCIsImlzRW1wdHkiLCJmaXRCb3VuZHMiLCJwYWRkaW5nIiwibWF4Wm9vbSIsInBsYWNlIiwibmFtZSIsImdlb21ldHJ5IiwiSlNPTiIsInBhcnNlIiwiZ2V0TGF5ZXIiLCJyZW1vdmVMYXllciIsImdldFNvdXJjZSIsInJlbW92ZVNvdXJjZSIsImFkZFNvdXJjZSIsInR5cGUiLCJkYXRhIiwiYWRkTGF5ZXIiLCJpZCIsInNvdXJjZSIsImxheW91dCIsInBhaW50IiwiZXJyIiwicm91dGVQb2ludHMiLCJjaXR5IiwiY2F0ZWdvcnkiLCJyYXRpbmciLCJkaXN0YW5jZUttIiwiY29vcmRzIiwicCIsImpvaW4iLCJvcHRpbWl6YXRpb25VcmwiLCJhZGREaXN0YW5jZU1hcmtlcnMiLCJsZWdzIiwiY29vcmRpbmF0ZXMiLCJmaWx0ZXIiLCJtIiwiX2lzRGlzdGFuY2VNYXJrZXIiLCJpIiwibGVnIiwic3RhcnQiLCJlbmQiLCJtaWRMbmciLCJtaWRMYXQiLCJkaXN0YW5jZSIsInRvRml4ZWQiLCJlbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImJhY2tncm91bmQiLCJib3JkZXIiLCJib3JkZXJSYWRpdXMiLCJmb250U2l6ZSIsImZvbnRXZWlnaHQiLCJib3hTaGFkb3ciLCJpbm5lclRleHQiLCJlbGVtZW50IiwiYW5jaG9yIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwianNvbiIsInRyaXBzIiwicm91dGUiLCJ1cmwiLCJyb3V0ZXMiLCJjYXRjaCIsImRpdiIsImNsYXNzTmFtZSIsInJlZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/MapView.tsx\n"));

/***/ })

});